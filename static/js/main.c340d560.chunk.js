(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(49)},25:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),o=n.n(i),c=(n(25),n(3)),s=n(4),u=n(8),l=n(5),d=n(6),m=n(1),p=n(17),f=n(19),h=n(10),v=n(9),g=n.n(v),b=n(18),w=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.stations,t=new Date,n=e[0].hour.replace(/\./g,":"),a=["Pra\xe7a de Londres","Sete-Rios"],i=e.filter(function(e){return-1===a.indexOf(e.station)}).map(function(e){return e.station}),o=n.split(":").map(function(e){return Number(e)}),c=t.getHours()>o[0]||t.getHours()===o[0]&&t.getMinutes()>=o[1];return r.a.createElement("div",{className:"card".concat(c?" done":"")},r.a.createElement("span",{className:"entry"},r.a.createElement("strong",null,n)," ",i.join(" > ")))}}]),t}(r.a.PureComponent);n(48);function k(e){return e>9?e:"0"+e}function j(e){var t=e||new Date;return[t.getHours(),t.getMinutes()].map(k).join(":")}function y(e){var t=e||new Date;return[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()].map(k).join("-")}function O(e){var t=new Date,n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value,s=[c.start,c.end].map(function(e){return e.split("/").reverse().map(function(e){return Number(e)})}),u=Object(h.a)(s,2),l=u[0],d=u[1];l[1]--,d[1]--;var m=[l,d].map(function(e){return Object(p.a)(Date,Object(f.a)(e))}),v=Object(h.a)(m,2),g=v[0],b=v[1];if(t>=g&&t<=b)return c.type}}catch(w){a=!0,r=w}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return"weekend"}var E=function(e){function t(e){var n;Object(c.a)(this,t),n=Object(u.a)(this,Object(l.a)(t).call(this,e));var a=g.a.get("data");return n.state={date:y(),time:j(),campus:"Taguspark",period:"weekday",data:a||void 0},n.nextCampus=n.nextCampus.bind(Object(m.a)(Object(m.a)(n))),n.nextPeriod=n.nextPeriod.bind(Object(m.a)(Object(m.a)(n))),n.updateTime=n.updateTime.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.data;void 0===t?fetch("https://web.tecnico.ulisboa.pt/~ist178013/api/shuttle/").then(function(e){return e.json()}).then(function(t){g.a.set("data",t),e.setState({data:t,period:O(t.date)})}):this.setState({period:O(t.date)})}},{key:"nextCampus",value:function(){var e=this.state.campus,t=["Taguspark","Alameda"],n=((t.indexOf(e)||0)+1)%t.length;this.setState({campus:t[n]})}},{key:"nextPeriod",value:function(){var e=this.state.period,t=["weekday","holidays","exams"],n=((t.indexOf(e)||0)+1)%t.length;this.setState({period:t[n]})}},{key:"updateTime",value:function(){this.setState({time:j()})}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.time,a=e.campus,i=e.period;if(!t)return null;var o=t.trips;if(!o)return null;var c,s=o.filter(function(e){return e.type===i&&e.stations[0].station===a}),u="Taguspark"===a?"Taguspark\nAlameda":"Alameda\nTaguspark";return r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement("h3",null,r.a.createElement("div",{className:"right big"},r.a.createElement("span",{onClick:this.updateTime,style:{lineHeight:"3rem"}},n)),r.a.createElement("div",{className:"table"},r.a.createElement("span",{className:"block big",onClick:this.nextPeriod},(c=i).charAt(0).toUpperCase()+c.slice(1)),r.a.createElement("span",{className:"big"},"\u21c4"),r.a.createElement("span",{className:"block",onClick:this.nextCampus},u)))),r.a.createElement("section",{id:"infos",className:"table"},"weekend"===i?r.a.createElement("div",{className:"card"},r.a.createElement("div",null,"Today is weekend!"),r.a.createElement("div",null,r.a.createElement(b.Twemoji,{svg:!0,text:"There is no Shuttle \u274c \ud83d\ude8c \ud83d\ude22"}))):s.map(function(e,t){return r.a.createElement(w,{key:t,stations:e.stations})})))}}]),t}(r.a.Component),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(E,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");T?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):x(e)})}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.c340d560.chunk.js.map